<UserControl x:Class="MarkRead.App.UI.Shell.NavigationBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:MarkRead.App.UI.Shell"
             mc:Ignorable="d"
             d:DesignHeight="48" Height="48"
             Background="{DynamicResource ThemeSecondaryBackgroundBrush}">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <!-- Left section: Navigation controls -->
            <ColumnDefinition Width="Auto"/>
            <!-- Middle section: File path display -->
            <ColumnDefinition Width="*"/>
            <!-- Right section: Actions and window controls -->
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Left Section: Back/Forward Navigation Buttons -->
        <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="12,0,0,0" VerticalAlignment="Center">
            <!-- Back Button (32x32px as per mockup) -->
            <Button x:Name="BackButton"
                    Command="{x:Static local:NavigationCommands.GoBack}"
                    Width="32" Height="32"
                    Margin="2,0"
                    Style="{DynamicResource NavigationButtonStyle}"
                    ToolTip="Go Back (Alt+Left)"
                    IsEnabled="{Binding CanGoBack}">
                <Path Data="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" 
                      Fill="{DynamicResource ThemeTextPrimaryBrush}"
                      Stretch="Uniform"
                      Width="16" Height="16"/>
            </Button>

            <!-- Forward Button (32x32px as per mockup) -->
            <Button x:Name="ForwardButton"
                    Command="{x:Static local:NavigationCommands.GoForward}"
                    Width="32" Height="32"
                    Margin="2,0"
                    Style="{DynamicResource NavigationButtonStyle}"
                    ToolTip="Go Forward (Alt+Right)"
                    IsEnabled="{Binding CanGoForward}">
                <Path Data="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" 
                      Fill="{DynamicResource ThemeTextPrimaryBrush}"
                      Stretch="Uniform"
                      Width="16" Height="16"/>
            </Button>
        </StackPanel>

        <!-- Middle Section: File Path Display -->
        <Border Grid.Column="1" 
                Margin="12,0"
                Padding="0"
                Background="Transparent"
                VerticalAlignment="Center">
            <TextBlock x:Name="FilePathText"
                       Text="{Binding RelativeFilePath, FallbackValue=''}"
                       Foreground="{DynamicResource ThemeTextSecondaryBrush}"
                       FontSize="12"
                       VerticalAlignment="Center"
                       TextTrimming="CharacterEllipsis"
                       HorizontalAlignment="Center"
                       MaxWidth="600"/>
        </Border>

        <!-- Right Section: Actions and Window Controls -->
        <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,0,0" VerticalAlignment="Center">
            <!-- Search Button (32x32px) -->
            <Button x:Name="SearchButton"
                    Click="SearchButton_Click"
                    Width="32" Height="32"
                    Margin="2,0"
                    Style="{DynamicResource NavigationButtonStyle}"
                    ToolTip="Find in Document (Ctrl+F)">
                <Path Data="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" 
                      Fill="{DynamicResource ThemeTextPrimaryBrush}"
                      Stretch="Uniform"
                      Width="16" Height="16"/>
            </Button>

            <!-- Export Dropdown Button (32x32px) -->
            <Button x:Name="ExportButton"
                    Click="ExportButton_Click"
                    Width="32" Height="32"
                    Margin="2,0"
                    Style="{DynamicResource NavigationButtonStyle}"
                    ToolTip="Export Options">
                <Path Data="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z" 
                      Fill="{DynamicResource ThemeTextPrimaryBrush}"
                      Stretch="Uniform"
                      Width="16" Height="16"/>
            </Button>

            <!-- Theme Toggle Button (32x32px) -->
            <Button x:Name="ThemeToggleButton"
                    Click="ThemeToggleButton_Click"
                    Width="32" Height="32"
                    Margin="2,0"
                    Style="{DynamicResource NavigationButtonStyle}"
                    ToolTip="Toggle Theme">
                <!-- Moon icon (for light mode - shows what clicking will switch to) -->
                <Path x:Name="ThemeIcon"
                      Data="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z" 
                      Fill="{DynamicResource ThemeTextPrimaryBrush}"
                      Stretch="Uniform"
                      Width="16" Height="16"/>
            </Button>

            <!-- Separator -->
            <Border Width="1" Height="24" 
                    Background="{DynamicResource ThemeBorderBrush}"
                    Margin="8,0"/>

            <!-- Window Control Buttons (48x48px to match mockup height) -->
            <StackPanel Orientation="Horizontal">
                <!-- Minimize Button -->
                <Button x:Name="MinimizeButton"
                        Click="MinimizeButton_Click"
                        Width="48" Height="48"
                        Margin="0"
                        Style="{DynamicResource WindowControlButtonStyle}"
                        ToolTip="Minimize">
                    <Path Data="M19 13H5v-2h14v2z" 
                          Fill="{DynamicResource ThemeTextPrimaryBrush}"
                          Stretch="Uniform"
                          Width="12" Height="12"/>
                </Button>

                <!-- Maximize/Restore Button -->
                <Button x:Name="MaximizeButton"
                        Click="MaximizeButton_Click"
                        Width="48" Height="48"
                        Margin="0"
                        Style="{DynamicResource WindowControlButtonStyle}"
                        ToolTip="Maximize">
                    <Path x:Name="MaximizeIcon"
                          Data="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" 
                          Fill="{DynamicResource ThemeTextPrimaryBrush}"
                          Stretch="Uniform"
                          Width="12" Height="12"/>
                </Button>

                <!-- Close Button -->
                <Button x:Name="CloseButton"
                        Click="CloseButton_Click"
                        Width="48" Height="48"
                        Margin="0"
                        Style="{DynamicResource CloseButtonStyle}"
                        ToolTip="Close">
                    <Path Data="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" 
                          Fill="{DynamicResource ThemeTextPrimaryBrush}"
                          Stretch="Uniform"
                          Width="14" Height="14"/>
                </Button>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>
