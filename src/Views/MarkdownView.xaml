<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MarkRead.ViewModels"
             xmlns:behaviors="clr-namespace:MarkRead.Behaviors"
             x:Class="MarkRead.Views.MarkdownView"
             x:DataType="viewmodels:DocumentViewModel">
    
    <Grid>
        <!-- Loading Indicator -->
        <ActivityIndicator IsRunning="{Binding IsRendering}"
                          IsVisible="{Binding IsRendering}"
                          VerticalOptions="Center"
                          HorizontalOptions="Center"
                          Color="{DynamicResource PrimaryColor}" />
        
        <!-- Error Message -->
        <VerticalStackLayout IsVisible="{Binding HasError}"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"
                           Spacing="16"
                           Padding="32">
            <Label Text="⚠️"
                   FontSize="48"
                   HorizontalOptions="Center" />
            <Label Text="{Binding ErrorMessage}"
                   FontSize="16"
                   HorizontalOptions="Center"
                   TextColor="{DynamicResource Gray900Color}" />
            <Button Text="Reload"
                    Command="{Binding ReloadDocumentCommand}"
                    HorizontalOptions="Center" />
        </VerticalStackLayout>
        
        <!-- HybridWebView for markdown rendering with touch support -->
        <Border x:Name="WebViewContainer"
                IsVisible="{Binding IsRendering, Converter={StaticResource InvertedBoolConverter}}"
                BackgroundColor="{DynamicResource BackgroundColor}">
            <Border.Behaviors>
                <behaviors:PinchZoomBehavior x:Name="PinchZoom" />
                <behaviors:SwipeNavigationBehavior x:Name="SwipeNav" />
            </Border.Behaviors>
            <!-- WebView will be added dynamically in code-behind -->
        </Border>
    </Grid>
    
</ContentView>
